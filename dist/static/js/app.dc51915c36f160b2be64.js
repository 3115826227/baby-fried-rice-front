webpackJsonp([3],{"0Mzc":function(e,t){},BGMJ:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("//Fk"),a=n.n(o),r=n("7+uW"),i=n("NYxO"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")({name:"App"},s,!1,function(e){n("o8nZ")},null,null).exports,c=n("/ocq"),u={name:"asideBarItem",props:{router:{type:Object}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.router.hasOwnProperty("children")?n("ol",{attrs:{index:e.router.path}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.router.name))]),e._v(" "),e._l(e.router.children,function(e){return n("asideBarItem",{key:e.path,attrs:{router:e}})})],2):n("el-menu-item",{key:e.router.path,attrs:{index:e.router.path}},[n("span",[e._v(e._s(e.router.name))])])},staticRenderFns:[]};var m=n("VU/8")(u,d,!1,function(e){n("BGMJ")},"data-v-84f1bf92",null).exports,f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("router-view")],1)},staticRenderFns:[]},p={name:"index",components:{Content:n("VU/8")({name:"content"},f,!1,null,null,null).exports,asideBarItem:m},data:function(){return{value:new Date,punchdialogVisible:!1,levelList:null,detail:{}}},computed:{routers:function(){return console.log(this.$router.options.routes),this.$router.options.routes[0].children}},watch:{$route:function(){this.getBreadcrumb()}},methods:{handleOpen:function(e,t){},handleClose:function(e,t){},getBreadcrumb:function(){var e=this.$route.matched.filter(function(e){return e.name});this.levelList=e},getDetail:function(){var e=this;this.$axios.get("/account/user/detail",{headers:{token:sessionStorage.getItem("token")}}).then(function(t){0===t.data.code&&(e.detail=t.data.data,localStorage.setItem("id",e.detail.user_id),localStorage.setItem("username",e.detail.username))}).catch(function(e){console.log(e)})},logout:function(){this.$axios.get("/account/user/logout",{headers:{token:localStorage.getItem("token")}}).then(function(e){0===e.data.code&&(window.location.href="/")}).catch(function(e){console.log(e)})},toPunch:function(){this.punchdialogVisible=!0}},created:function(){this.getBreadcrumb(),this.getDetail()}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{id:"index-container"}},[n("el-header",{attrs:{id:"header"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal",router:"","default-active":e.$route.path,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[n("el-menu-item",[n("router-link",{staticClass:"header-label",attrs:{to:"/index"}},[e._v("宝宝煎米果")])],1),e._v(" "),e._l(e.routers,function(e){return n("asideBarItem",{key:e.path,attrs:{router:e}})}),e._v(" "),n("el-submenu",{staticStyle:{float:"right"}},[n("template",{slot:"title"},[n("span",[n("el-avatar",{attrs:{size:"small"}},[e._v(e._s(e.detail.username[0]))])],1),e._v(" "),n("span",[e._v(e._s(e.detail.username)+"@baby.com")])]),e._v(" "),n("el-menu-item",{on:{click:e.toPunch}},[e._v("每日打卡")]),e._v(" "),n("el-menu-item",{attrs:{index:"4-2"},on:{click:e.logout}},[e._v("退出")])],2)],2)],1),e._v(" "),n("el-container",{attrs:{id:"content"}},[n("el-main",{staticClass:"el-main"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.levelList,function(t){return n("el-breadcrumb-item",{key:t.path},[n("span",[e._v(e._s(t.name))])])}),1),e._v(" "),n("Content")],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"打卡",visible:e.punchdialogVisible,width:"70%"},on:{"update:visible":function(t){e.punchdialogVisible=t}}},[n("el-calendar",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)},staticRenderFns:[]};var v=n("VU/8")(p,h,!1,function(e){n("VrUb")},"data-v-0c9ce9a4",null).exports,g={name:"Login",components:{},data:function(){return{form:{login_name:"",password:""},system:{ip:"",area:"",brower:"",os:""},code_img_src:"",img_code_id:"",img_code:""}},mounted:function(){this.getCode()},methods:{getCode:function(){var e=this;this.$axios.get("/captcha",{}).then(function(t){e.img_code_id=t.data.captcha_id,e.img_code="http://localhost:8070"+t.data.image_url})},verifyCode:function(){this.$axios.get("/verify/"+this.img_code_id+"/"+this.form.code,{}).then(function(e){console.log(e.data)})},login:function(){var e=this;this.$axios.post("/user/login",{login_name:this.form.login_name,password:this.form.password}).then(function(t){0===t.data.code?(window.localStorage.setItem("token",t.data.data.token),window.localStorage.setItem("super",t.data.data.user_info.is_super),window.sessionStorage.setItem("token",t.data.data.token),e.$router.push({path:"/index"})):console.log(t)}).catch(function(t){console.log(t),e.$message.error("请求出错，可能是输入的用户名和密码不匹配")})},register:function(){this.$router.push({path:"/register"})}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"name"},[e._v("\n      宝宝煎米果\n    ")]),e._v(" "),n("el-form",{ref:e.form,attrs:{model:e.form,"label-width":"70px"}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{type:"text",placeholder:""},model:{value:e.form.login_name,callback:function(t){e.$set(e.form,"login_name",t)},expression:"form.login_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"验证码"}},[n("el-col",{staticStyle:{"margin-right":"20px"},attrs:{span:10}},[n("el-input",{attrs:{type:"code",placeholder:""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),n("el-col",{attrs:{span:10}},[n("img",{attrs:{src:e.img_code,height:"40"},on:{click:e.getCode}})])],1),e._v(" "),n("el-form-item",{attrs:{label:"",id:"submit"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登陆")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")])],1)],1)],1)},staticRenderFns:[]};var b=n("VU/8")(g,_,!1,function(e){n("0Mzc")},"data-v-433ac407",null).exports,w={name:"register",components:{},data:function(){return{form:{gender:"男"},timer:null,count:"",clickGetCode:!1,confirm_message:"",dialogVisible:!1,block_y:0,imgurl:"",miniimgurl:"",chenckMoveid:"",text:""}},created:function(){localStorage.setItem("confirm",!1)},methods:{login:function(){this.$router.push({path:"/"})},getCode:function(){var e=this;if("false"!==localStorage.getItem("confirm")){this.confirm_message="";this.timer||(this.clickGetCode=!0,this.count=10,this.timer=setInterval(function(){e.count>0&&e.count<=10?e.count--:(e.clickGetCode=!1,clearInterval(e.timer),e.timer=null)},1e3))}else this.confirm_message="请先进行滑块验证"},register:function(){var e=this,t=!1;"男"===this.form.gender&&(t=!0),this.$axios.post("/user/register",{login_name:this.form.login_name,password:this.form.password,username:this.form.username,gender:t}).then(function(t){0===t.data.code&&e.$router.push({path:"/"})}).catch(function(e){console.log(e)})},onSuccess:function(){},onFail:function(){},getImageVerifyCode:function(){var e=this;this.$axios.get("/usr/code").then(function(t){if(t&&"20000"===t.code){var n=JSON.parse(t.data);e.block_y=n.yHeight,e.imgurl="data:image/png;base64,"+n.bigImage,e.miniimgurl="data:image/png;base64,"+n.smallImage,e.chenckMoveid=n.chenckMoveid,e.$refs.dialogopen&&e.$refs.dialogopen.reset(n.yHeight)}else this.$message({showClose:!0,message:"获取图形验证码失败，请重试",type:"error"})}).catch(function(e){console.log(e)})},onRefresh:function(){this.imgurl="https://cpro.baidu.com/cpro/ui/uijs.php?en=mywWUA71T1YsFh7sT7qGujYsFhPC5H0huAbqrauGTdq9TZ0qnauJp1Y4uWN-mHIhuHc3Pjm1uADzFh_qFRFAFRn4FRPKFRf1FRFaFR7AFRcLFRfvFRP7FRmvFhkdpvbqnzuVmLKV5HTvnHD1FMDqmLPbUhF9pywdgvPsTBuzmWYsFMF15HDhTvN_UANzgv-b5HDhTv-b5yDznvfYPWc3uhN9P1N-rymhTLwGujYknHThIjdYTAP_pyPouyf1gv9WFMwb5Hnsn1cdnW6hIAd15HDdrjTvPHDLPWnhIZRqIHnsn1cdnW6hIHdCIZwsTzR1fiRzwBRzwhF_UvT-nbNWTvw8FHF7UhNYFMNGUy-b5RmdPH0kPRfLn1PanbuAnYc3nDc4rRPjwRmLPHwKfWcYFMmqnBuG5H6LmhF9uhNW&besl=-1&c=news&cf=1&cvrq=616350&eid_list=200197&expid=200019_200197_200352_203600_205056_205198_205949_208996_209813&fr=32&fv=0&haacp=253&img_typ=21094&itm=0&lu_idc=tc&lukid=3&lus=a23d4628fea75e9f&lust=5ea1a4b3&mscf=0&mtids=2002052189&n=10&nttp=1&p=baidu&pbs=228840&sce=7&sr=280&ssp2=1&tpl=baiduCustNativeADImageCarousel&tsf=dtp:1&u=%2Fqq%5F42068550%2Farticle%2Fdetails%2F92604316&uicf=lurecv&urlid=0&eot=1",this.miniimgurl="https://cpro.baidu.com/cpro/ui/uijs.php?en=mywWUA71T1YsFh7sT7qGujYsFhPC5H0huAbqrauGTdq9TZ0qnauJp1Y4uWN-mHIhuHc3Pjm1uADzFh_qFRFAFRn4FRPKFRf1FRFaFR7AFRcLFRfvFRP7FRmvFhkdpvbqnzuVmLKV5HTvnHD1FMDqmLPbUhF9pywdgvPsTBuzmWYsFMF15HDhTvN_UANzgv-b5HDhTv-b5yDznvfYPWc3uhN9P1N-rymhTLwGujYknHThIjdYTAP_pyPouyf1gv9WFMwb5Hnsn1cdnW6hIAd15HDdrjTvPHDLPWnhIZRqIHnsn1cdnW6hIHdCIZwsTzR1fiRzwBRzwhF_UvT-nbNWTvw8FHF7UhNYFMNGUy-b5RmdPH0kPRfLn1PanbuAnYc3nDc4rRPjwRmLPHwKfWcYFMmqnBuG5H6LmhF9uhNW&besl=-1&c=news&cf=1&cvrq=616350&eid_list=200197&expid=200019_200197_200352_203600_205056_205198_205949_208996_209813&fr=32&fv=0&haacp=253&img_typ=21094&itm=0&lu_idc=tc&lukid=3&lus=a23d4628fea75e9f&lust=5ea1a4b3&mscf=0&mtids=2002052189&n=10&nttp=1&p=baidu&pbs=228840&sce=7&sr=280&ssp2=1&tpl=baiduCustNativeADImageCarousel&tsf=dtp:1&u=%2Fqq%5F42068550%2Farticle%2Fdetails%2F92604316&uicf=lurecv&urlid=0&eot=1"},submitForm:function(e,t){var o=this,a=this,r=this.$loading({lock:!0,text:"登录中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.loading=!0;var i=n("xrTZ").Base64,s={username:i.encode(this.ruleForm2.username),password:i.encode(this.ruleForm2.password),x_index:t,chenckMoveid:a.chenckMoveid};this.$store.dispatch("Login",s).then(function(e){r.close(),o.isLogined=!0,o.loading=!1,o.$router.push({path:"/"})}).catch(function(){r.close(),o.loading=!1,a.$refs.dialogopen&&a.$refs.dialogopen.reset()})}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"register"}},[n("div",{staticClass:"name"},[e._v("\n      宝宝煎米果\n    ")]),e._v(" "),n("AliCaptcha"),e._v(" "),n("el-form",{attrs:{model:e.form,"label-width":"20%"}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{type:"text",placeholder:""},model:{value:e.form.login_name,callback:function(t){e.$set(e.form,"login_name",t)},expression:"form.login_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"昵称"}},[n("el-input",{attrs:{type:"text",placeholder:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"重复密码"}},[n("el-input",{attrs:{type:"password",placeholder:""},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword",t)},expression:"form.repassword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{attrs:{type:"phone",placeholder:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("JcRange"),e._v(" "),e.confirm_message?n("span",{staticStyle:{"font-size":"11px",color:"red"}},[e._v(e._s(e.confirm_message))]):e._e()],1),e._v(" "),n("el-form-item",{attrs:{label:"验证码"}},[n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{type:"code",placeholder:""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),n("el-col",{staticStyle:{"margin-left":"15px"},attrs:{span:5}},[e.clickGetCode?n("span",[n("el-button",{attrs:{type:"primary",disabled:""}},[e._v(e._s(e.count)+" s")])],1):n("span",[n("el-button",{attrs:{type:"primary"},on:{click:e.getCode}},[e._v("点击获取")])],1)])],1),e._v(" "),n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[n("el-option",{attrs:{label:"男",value:"男"}}),e._v(" "),n("el-option",{attrs:{label:"女",value:"女"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"",id:"submit"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")])],1)],1),e._v(" "),n("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogVisible,"show-close":!1,width:"450px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("SlideVerify",{ref:"dialogopen",attrs:{l:42,r:10,w:410,h:200,block_y:e.block_y,imgurl:e.imgurl,miniimgurl:e.miniimgurl,"slider-text":e.text},on:{success:e.onSuccess,fail:e.onFail,refresh:e.onRefresh}})],1)],1)},staticRenderFns:[]};var F=n("VU/8")(w,x,!1,function(e){n("ydJB")},"data-v-9794ccf6",null).exports;r.default.use(c.a);var y=[{path:"/index",name:"首页",component:v,children:[{path:"/im",index:1,name:"聊天",component:function(){return n.e(0).then(n.bind(null,"s8t2"))}},{path:"/user",index:10,name:"个人中心",component:function(){return n.e(1).then(n.bind(null,"kB97"))}}]},{path:"/",name:"登陆",component:b},{path:"/register",name:"注册",component:F}];console.log(y);var k=new c.a({routes:y}),R=n("zL8q"),P=n.n(R),$=(n("tvR6"),n("mtWM")),I=n.n($);function H(){var e=navigator.userAgent.toLocaleLowerCase(),t=null;if(null!=e.match(/msie/)||null!=e.match(/trident/))t="IE";else if(null!=e.match(/firefox/))t="firefox";else if(null!=e.match(/ucbrowser/))t="UC";else if(null!=e.match(/opera/)||null!=e.match(/opr/))t="opera";else if(null!=e.match(/bidubrowser/))t="baidu";else if(null!=e.match(/metasr/))t="sougou";else if(null!=e.match(/tencenttraveler/)||null!=e.match(/qqbrowse/))t="QQ";else if(null!=e.match(/maxthon/))t="maxthon";else if(null!=e.match(/chrome/)){t=function(e,t){var n=navigator.mimeTypes;for(var o in n)if(n[o][e]===t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"360":"chrome"}else t=null!=e.match(/safari/)?"Safari":"others";return t}r.default.prototype.$axios=I.a.create({headers:{},baseURL:"http://localhost:8070/api",timeout:5e3}),r.default.prototype.$axios.interceptors.request.use(function(e){var t=sessionStorage.getItem("ip"),n=sessionStorage.getItem("area"),o=H(),a=function(){var e=navigator.userAgent.toLocaleLowerCase(),t="win32"===navigator.platform||"windows"===navigator.platform,n="mac68k"===navigator.platform||"macppc"===navigator.platform||"macintosh"===navigator.platform||"macintel"===navigator.platform;if(n)return"Mac";if("x11"===navigator.platform&&!t&&!n)return"Unix";if(String(navigator.platform).indexOf("linux")>-1)return"Linux";if(t){if(e.indexOf("windows nt 5.0")>-1||e.indexOf("windows 2000")>-1)return"Win2000";if(e.indexOf("windows nt 5.1")>-1||e.indexOf("windows xp")>-1)return"WinXP";if(e.indexOf("windows nt 5.2")>-1||e.indexOf("windows 2003")>-1)return"Win2003";if(e.indexOf("windows nt 6.0")>-1||e.indexOf("windows vista")>-1)return"WinVista";if(e.indexOf("windows nt 6.1")>-1||e.indexOf("windows 7")>-1)return"Win7"}return e.indexOf("android")>-1?"Android":e.indexOf("iphone")>-1?"iPhone":e.indexOf("symbianos")>-1?"SymbianOS":e.indexOf("windows phone")>-1?"Windows Phone":e.indexOf("ipad")>-1?"iPad":e.indexOf("ipod")>-1?"iPod":"others"}();return e.headers.IP=t,e.headers.Area=encodeURI(n),e.headers.Brower=o,e.headers.OS=a,console.log(t,n,o,a),e},function(e){return a.a.reject(e)}),r.default.prototype.$axios.interceptors.response.use(function(e){return console.log(e.data),e},function(e){return a.a.reject(e)}),r.default.use(P.a),r.default.use(i.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:k,components:{App:l},template:"<App/>"})},VrUb:function(e,t){},o8nZ:function(e,t){},tvR6:function(e,t){},ydJB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.dc51915c36f160b2be64.js.map